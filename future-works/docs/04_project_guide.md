# üõ†Ô∏è ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö (Implementation Guide)





* ### Credits / Acknowledgements
  * This project references and builds upon materials from:
  * *[non-deegree-workshops-2025](https://github.com/drsanti/non-deegree-workshops-2025/tree/nd1-2-iot-projects)*



  


‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ô‡∏≥‡πÄ‡∏™‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Server ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°

## üîÑ System Workflow

```mermaid
sequenceDiagram
    participant ESP as ESP32 Device
    participant MQTT as MQTT Broker
    participant NR as Node-RED Dash
    participant Py as Python Script
    participant API as API/Database

    Note over ESP: 1. ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ Sensor (‡∏ó‡∏∏‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
    ESP->>MQTT: Publish: sensors/temperature/esp32-003

    par ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ 2 ‡∏ó‡∏≤‡∏á
        MQTT->>NR: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏±‡∏î (Gauge)
        MQTT->>Py: ‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ Python ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•
    end

    Note over Py: 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç
    alt ‡∏£‡πâ‡∏≠‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô (> 30¬∞C)
        Py->>MQTT: Publish Command: {"value": 1}
        MQTT->>ESP: ‡∏™‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏¥‡∏î ‡∏û‡∏±‡∏î‡∏•‡∏° (ON)
        Py->>API: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Log "switch_on"
    else ‡πÄ‡∏¢‡πá‡∏ô‡∏•‡∏á (< 25¬∞C)
        Py->>MQTT: Publish Command: {"value": 0}
        MQTT->>ESP: ‡∏™‡∏±‡πà‡∏á‡∏õ‡∏¥‡∏î ‡∏û‡∏±‡∏î‡∏•‡∏° (OFF)
        Py->>API: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Log "switch_off"
    end
```

---

## ‚úÖ 1: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Server (Docker)

1. ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° Docker Desktop
2. ‡πÄ‡∏õ‡∏¥‡∏î Terminal ‡∏´‡∏£‡∏∑‡∏≠ CMD ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
3. ‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á: Script
4. ‡∏£‡∏≠‡∏à‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Container ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏ö

üëâ **[Server Setup: üìÑ Docker](./04_docker_script.md)**

## ‚úÖ 2: ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° ESP32 (Hardware Code)

‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ñ‡πà‡∏≤ Temp/Hum ‡∏™‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô MQTT ‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î ‡∏û‡∏±‡∏î‡∏•‡∏°

**‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á:**

1. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Library ‡πÉ‡∏ô Arduino IDE: `PubSubClient`, `ArduinoJson`
2. Copy ‡πÇ‡∏Ñ‡πâ‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `SSID`, `Password`, ‡πÅ‡∏•‡∏∞ `IP Address` ‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå
3. Upload ‡∏•‡∏á‡∏ö‡∏≠‡∏£‡πå‡∏î

üëâ **[ESP32 Code: üìÑ Main.c](./04_esp32_code.md)**

## ‚úÖ 3: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° (Node-RED Flow)

‡πÉ‡∏ä‡πâ **Node-RED Dashboard 2.0** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î

1. ‡πÄ‡∏Ç‡πâ‡∏≤ Node-RED: `http://localhost:1880`
2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Menu -> Import -> ‡∏ß‡∏≤‡∏á JSON Code ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á -> ‡∏Å‡∏î Deploy
3. ‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠: `http://localhost:1880/dashboard`

üëâ **[Node-Red: üìÑ JSON Flow](./04_node_red_flow.md)**

## ‚úÖ 4: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° (Python Controller)

Script ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ Temp ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÅ‡∏ó‡∏ô‡∏Ñ‡∏ô

1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `main_controller.py`
2. ‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á: `python main_controller.py`

üëâ **[Python Script: üìÑ python_controller.py](./04_python_controller.md)**

## ‚úÖ 5: ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

1. **Hardware Check:** ‡∏î‡∏π Serial Monitor ‡∏Ç‡∏≠‡∏á ESP32 ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏á Temp ‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ ‡πÅ‡∏•‡∏∞‡∏Ç‡∏∂‡πâ‡∏ô "Connecting WiFi... OK"
2. **Dashboard Check:** ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö Node-RED ‡πÄ‡∏Ç‡πá‡∏°‡∏ß‡∏±‡∏î‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏¢‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà ESP32 ‡∏™‡πà‡∏á
3. **Automation Check:**

* ‡∏£‡∏≠‡πÉ‡∏´‡πâ ESP32 ‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô **30.00** -> Python ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü -> ‡πÑ‡∏ü‡∏ö‡∏ô‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏ï‡∏¥‡∏î -> ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏õ‡πá‡∏ô ON
* ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ **25.00** -> ‡πÑ‡∏ü‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏±‡∏ö

4. **Database Check:** ‡∏î‡∏π‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ Python Controller ‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ß‡πà‡∏≤ `Logged to DB`

### ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á (Troubleshooting)

1. **IP Address ‡∏ú‡∏¥‡∏î:** ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î ESP32 ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ `localhost` ‡∏´‡∏£‡∏∑‡∏≠ `127.0.0.1` ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ IP ‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå (‡πÄ‡∏ä‡πà‡∏ô `192.168.1.50`) ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
2. **Firewall:** ‡∏´‡∏≤‡∏Å ESP32 ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ MQTT ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏á‡∏õ‡∏¥‡∏î Firewall ‡∏Ç‡∏≠‡∏á Windows ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï Port `1883` ‡πÅ‡∏•‡∏∞ `5000`
3. **Node-RED Dashboard:** ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á `@flowfuse/node-red-dashboard` ‡πÅ‡∏•‡πâ‡∏ß (Dashboard 2.0)
4. **WiFi:** ESP32 ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡∏≤‡∏∞ WiFi ‡∏ß‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô (Subnet ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)

### ‡∏™‡∏£‡∏∏‡∏õ

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£:

1. Sensor ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤
2. Python ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•
3. ‡∏™‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î ‡∏û‡∏±‡∏î‡∏•‡∏°
4. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ö‡∏ô Dashboard ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Database

[üîô ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å](../readme.md)
